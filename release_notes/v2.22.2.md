# WhisperDoc Technical Release Notes - v2.22.2
**Version Range: v2.20.0 to v2.22.2**

This release marks a significant milestone in system robustness, introducing the **Security Hardening Blueprint v3.0** for the backend, a complete architectural modernization of the terminal client, and sophisticated audio signal heuristics for the Flutter client. It represents a "Principal-level" approach to availability, integrity, and user experience.

## Backend Hardening (Blueprint v3.0)

### Identity-Pinned Concurrency (IPC) Guard
- Implemented per-identity semaphores in the `ConnectionManager` to prevent identity-targeted GPU OOM attacks. This ensuring that a single malicious user cannot crash the GPU while legitimate concurrent users experience zero latency degradation.

### Zero-Trust & Network Lockdown
- **Perimeter Lockdown**: Restricted the backend bind to the local loopback (`127.0.0.1`), ensuring the API is physically unreachable except via the authorized Cloudflare Tunnel.
- **Packet Guard**: Configured protocol-level WebSocket frame limits (1MB) and tightened keep-alive windows to prevent network-layer memory exhaustion.
- **Host Validation**: Hardened the `TrustedHostMiddleware` to reject IP-based `Host` headers and enforce strict domain-level trust.

### Integrity Gates & Governance
- **Backend Sanitization**: Introduced a microsecond-latency integrity gate that neutralizes Reflected Terminal Injection (ANSI/Control characters) in transcription results before they are emitted.
- **Anti-Slowloris Monitor**: Developed a throughput-based pruning mechanism that reaps connections sending less than 1KB/s (after a 60s grace period) to protect connection slots from resource-hogging idle clients.
- **Fail-Secure Handshake**: Implemented a robust SemVer parser and OIDC Issuer Pinning to enforce strict protocol adherence.

## Terminal Client Modernization

### Modular Architecture & Lifecycle
- Migrated the entire Python terminal client to a modular, layered architecture (Infrastructure -> Services -> Logic -> Controllers), adhering to the project's strict modularity constraints.
- Implemented a "Zero-Loss" lifecycle featuring parallel audio buffering, allowing audio capture to start instantly even while the WebSocket connection is warming up.
- Optimized credential hygiene with immediate memory scrubbing of sensitive OIDC tokens and API keys.

### Security & Setup Hardening
- **Transport Security**: Enforced mandatory TLS verification against system root CA stores for all backend communication.
- **Setup Intelligence**: Added validation loops in the interactive setup to prevent invalid Host API or Device ID inputs, ensuring device selection is strictly bound to compatible Host APIs.
- **Input Neutralization**: Integrated a whitelist-based sanitizer to prevent terminal injection from pasted content.

## Client (Flutter) Engineering

### Advanced Audio Heuristics
- **Digital-Zero Detection**: Implemented a sophisticated silence detection heuristic ($10^{-8}$ threshold) to differentiate between virtual drivers (perfect zero) and real analog microphones (noise floor).
- **Visual Feedback Circuit**: Added a reactive, pulsing warning icon in the ActionBar that appears during sustained silence, providing an intelligent link to Settings for correction.

### UI & Audio Routing
- **WASAPI Device Selector**: Introduced hardware-level support for listing and selecting persistent WASAPI input devices.
- **Design System Integration**: Implemented a Glassmorphism-themed Audio Input section in Settings and applied Lexend typography across all new components to maintain visual premium aesthetics.

## Performance & Stability
- **Opaque Observability**: Refactored the `/health` endpoint to return binary status only, hiding sensitive hardware and version metadata from public reconnaissance.
- **Synchronized Handshake**: Updated terminal handshake logic to support backend model hot-reloading and version requirement advisories.
- **Memory Hygiene**: Enforced `read_only` container runtimes and `tmpfs` mounts for transient audio transients.
